From 5356832819c294f46148ca47d2a15547899d7df8 Mon Sep 17 00:00:00 2001
From: Matthias Clasen <mclasen@redhat.com>
Date: Tue, 11 Jan 2011 16:52:22 +0000
Subject: build: Detect X11 properly with newer GTK+

The "target" pkg-config variable was renamed to "targets".

https://bugzilla.gnome.org/show_bug.cgi?id=639168
---
diff --git a/configure.in b/configure.in
index 44ff8d8..ebd26f0 100644
--- a/configure.in
+++ b/configure.in
@@ -163,7 +163,7 @@ do
 done
 
 dnl Check the smclient backend
-GDK_TARGET="$($PKG_CONFIG --variable target gdk-3.0)"
+GDK_TARGET="$($PKG_CONFIG --variable targets gdk-3.0)"
 
 SMCLIENT_PKGS=
 AC_MSG_CHECKING([which smclient backend to use])
@@ -215,7 +215,7 @@ dnl *************************
 dnl X11 related functionality
 dnl *************************
 have_x11=no
-if test x$(pkg-config --variable=target gtk+-3.0) = xx11; then
+if test x$(pkg-config --variable=targets gtk+-3.0) = xx11; then
 	AC_PATH_X
 
 	have_x11=yes
--
cgit v0.8.3.1
