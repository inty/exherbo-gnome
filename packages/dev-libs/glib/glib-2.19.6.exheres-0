# Copyright 2007 Bryan Ã˜stergaard <kloeri@exherbo.org>
# Copyright 2008 Saleem Abdulrasool <compnerd@compnerd.org>
# Distributed under the terms of the GNU General Public License v2

require glib multilib

SLOT="2"
PLATFORMS="~amd64 ~ia64 ~ppc64 ~x86"
MYOPTIONS="doc fam man"

DEPENDENCIES="
    build+run:
        fam? ( app-admin/gamin )
    build:
        >=sys-devel/gettext-0.11
        >=dev-util/pkg-config-0.16
        doc? ( >=app-doc/gtk-doc-1.11 )
        man? ( dev-libs/libxslt
               app-text/docbook-xml-dtd:4.1.2 )
"

DEFAULT_SRC_PREPARE_PATCHES=( "${FILES}/${PN}-2.19.2-slice-threadinit-tests-fix.patch" )

DEFAULT_SRC_CONFIGURE_PARAMS=( '--enable-static' '--with-threads=posix' )
DEFAULT_SRC_CONFIGURE_OPTION_ENABLES=( 'doc gtk-doc' 'fam' 'man' )

src_install() {
    default

    keepdir "/usr/$(get_libdir)/gio/modules"
}

