# Copyright 2009 Wulf C. Krueger <philantrop@exherbo.org>
# Distributed under the terms of the GNU General Public License v2

require gnome-2

SUMMARY="A VNC viewer widget for GTK"
DESCRIPTION="
GTK-VNC is a VNC viewer widget for GTK+. It is built using coroutines, allowing
it to be completely asynchronous while remaining single threaded. It supports RFB
protocols 3.3 through 3.8 and the VeNCrypt authentication extension providing
SSL/TLS encryption with x509 certificate authentication. The core library is
written in C and a binding for Python using PyGTK is available. The networking
layer supports connections over both IPv4 and IPv6. Example code illustrates how
to build a vncviewer replacement using either C or Python.
"
HOMEPAGE="http://${PN}.sourceforge.net/"
DOWNLOADS="mirror://sourceforge/${PN}/${PNV}.tar.gz"

REMOTE_IDS="freshmeat:${PN/-} sourceforge:${PN}"

UPSTREAM_RELEASE_NOTES="https://sourceforge.net/project/shownotes.php?group_id=190580&release_id=645598"

LICENCES="GPL-2"
SLOT="0"
PLATFORMS="~amd64"

MYOPTIONS="python"

DEPENDENCIES="
    build:
        dev-util/pkg-config
    build+run:
        >=dev-lang/python-2.4:=
        >=dev-libs/gnutls-2.6.4
        >=x11-libs/cairo-1.8.6
        >=x11-libs/gtk+-2.14.7
        python? ( gnome-bindings/pygtk:2 )
"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --with-coroutine=gthread
    --without-libview
    --without-gtkglext
)

DEFAULT_SRC_CONFIGURE_OPTION_WITHS=(
    python
)

src_install() {
    default

    find "${IMAGE}" -type d -empty -delete || die "removing empty dirs failed"
}
