# Copyright 2008 Saleem Abdulrasool <compnerd@compnerd.org>
# Distributed under the terms of the GNU General Public License v2

freedesktop-mime_is_desktop_file_utils() {
    [[ "${CATEGORY}/${PN}" == 'dev-util/desktop-file-utils' ]]
}

freedesktop-mime_is_desktop_file_utils || {
    DEPENDENCIES+="build: dev-util/desktop-file-utils"
}


freedesktop-mime_update_desktop_database() {
    if [[ "${ROOT}" == / ]] ; then
        ebegin "Updating desktop database"
        /usr/bin/update-desktop-database -q /usr/share/applications
        eend $?
    else
        ewarn 'Not updating desktop database because ${ROOT} != /'
    fi
}


freedesktop-mime_pkg_postinst() {
    freedesktop-mime_update_desktop_database
}

freedesktop-mime_pkg_postrm() {
    freedesktop-mime_update_desktop_database
}

export_exlib_phases pkg_postinst pkg_postrm
